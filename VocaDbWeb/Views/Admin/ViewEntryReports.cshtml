@inherits VocaDb.Web.Code.VocaDbPage<EntryReportContract[]>
@using VocaDb.Model.DataContracts
@using VocaDb.Model.Domain
@using VocaDb.Web.Helpers;

@helper TypeName(EntryReportContract contract) {
	switch (contract.Entry.EntryType) {
		case EntryType.Album:
			@Translate.AlbumReportTypeNames[contract.AlbumReportType]
			break;
		case EntryType.Artist:
		@Translate.ArtistReportTypeNames[contract.ArtistReportType]
			break;
		case EntryType.Song:
		@Translate.SongReportTypeNames[contract.SongReportType]
			break;
		case EntryType.User:
		@Translate.UserReportTypeNames[contract.UserReportType]
			break;
	}
}

@{
	PageProperties.Title = "View entry reports";
	ViewBag.Parents = new[] {
		Html.ActionLink("Manage", "Index"),
	};
}

<div class="alert alert-info">
	This list contains entries that have been reported for errors. It is visible to all trusted users and moderators,
	and anyone can take action based on these reported issues.
	If you have time, please check that the reports are valid, and either notify the user who created the entry in the first place,
	or correct the errors yourself. After the issue has been resolved you can delete the report.
</div>

<table class="table table-striped">
	<thead>
		<tr>
			<th>Time</th>
			<th>Author</th>
			<th>Entry</th>
			<th>Type</th>
			<th>Notes</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var r in Model) {
			<tr>
				<td>@r.Created</td>
				<td>@UserHelpers.UserIconLink(r.User, r.Hostname)</td>
				<td>@Helpers.EntryLink(r.Entry)</td>
				<td>@TypeName(r)</td>
				<td>@r.Notes</td>
				<td><a href="@Url.Action("DeleteEntryReport", new { id = r.Id })" class="textLink deleteLink">Delete</a></td>
			</tr>
		}
	</tbody>
</table>
