@using Resources
@using VocaDb.Model.Service.Search
@using Res = ViewRes.Search.IndexStrings;

@helper AdvancedFilter(string description, AdvancedFilterType filterType, string param) {
	<li data-bind="visible: !hasAdvancedFilter('@filterType.ToString()', '@param')">
		<a href="#" data-bind="click: function() { addAdvancedFilter('@filterType.ToString()', '@param', '@description'); }">
			@description
		</a>
	</li>
}

<!-- Song search options -->
<div data-bind="visible: showSongSearch, with: songSearchViewModel">
	<div class="control-group">
		<div class="control-label">@Res.SongType</div>
		<div class="controls">
			@SongHelpers.SongTypesDropdownKnockout("songType")
		</div>
	</div>

	<div class="control-group">
		<div class="control-label">@EntryTypeNames.Artist</div>
		<div class="controls" data-bind="with: artistFilters">
			@KnockoutHelpers.ArtistFilters(artistParticipationStatus: true)
		</div>
	</div>

	<div class="control-group">
		<div class="control-label">@Res.MoreRecentThan</div>
		<div class="controls">
			<select data-bind="value: since">
				<option value="">(Show all)</option>
				<option value="24">1 day</option>
				<option value="48">2 days</option>
				<option value="168">7 days</option>
				<option value="336">2 weeks</option>
				<option value="720">1 month</option>
				<option value="4320">6 months</option>
				<option value="8760">1 year</option>
			</select>
		</div>
	</div>

	<div class="control-group">
		<div class="control-label">@Res.MinScore</div>
		<div class="controls">
			<input type="number" data-bind="textInput: minScore" maxlength="10" min="0" class="input-small" />
		</div>
	</div>
	
	<div class="control-group">
		<div class="control-label"></div>
		<div class="controls">
			<div class="btn-group">
				<button class="btn dropdown-toggle" data-toggle="dropdown">
					Advanced filters
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu">
					@AdvancedFilter("Artist type: Vocaloid", AdvancedFilterType.ArtistType, "Vocaloid")
					@AdvancedFilter("Artist type: UTAU", AdvancedFilterType.ArtistType, "UTAU")
					@AdvancedFilter("Artist type: CeVIO", AdvancedFilterType.ArtistType, "CeVIO")
					@AdvancedFilter("Artist type: other voice synthesizer", AdvancedFilterType.ArtistType, "OtherVoiceSynthesizer")
					@AdvancedFilter("Lyrics: Any language", AdvancedFilterType.Lyrics, "Japanese,Romaji,English")
					@AdvancedFilter("Lyrics: Non-English", AdvancedFilterType.Lyrics, "Japanese")
					@AdvancedFilter("Lyrics: Romanized", AdvancedFilterType.Lyrics, "Romaji")
					@AdvancedFilter("Lyrics: English", AdvancedFilterType.Lyrics, "English")
				</ul>
			</div>
			<div data-bind="foreach: advancedFilters" class="search-advanced-filters-list">
				<div class="label label-info" data-bind="click: function() { $parent.advancedFilters.remove($data); }">
					<button type="button" class="close">×</button>
					<span data-bind="text: description"></span>
				</div>
			</div>
		</div>
	</div>
</div>

